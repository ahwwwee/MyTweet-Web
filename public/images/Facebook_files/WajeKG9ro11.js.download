if (self.CavalryLogger) { CavalryLogger.start_js(["ccAk5"]); }

__d('MessengerPlatformBotReviewStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MessengerPlatformBotReviewReadDataManager','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MessengerPlatformBotReviewStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.pageID||k.state&&k.state.pageID;switch(l){case c('MNCommerceActionTypes').BOT_REVIEW_STATE.LOADED:var n=k.state;this.$MessengerPlatformBotReviewStore1.set(m,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').BOT_REVIEW_STATE.LOAD_ERROR:this.$MessengerPlatformBotReviewStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load permissions for: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').BOT_REVIEW_STATE.RELOAD:if(m){this.$MessengerPlatformBotReviewStore1.set(m,c('LoadObject').loading());c('MessengerPlatformBotReviewReadDataManager').fetchReviewState(m);}this.__emitChange();break;}};j.prototype.getReviewState=function(k){if(k&&!this.$MessengerPlatformBotReviewStore1.has(k)){this.$MessengerPlatformBotReviewStore1.set(k,c('LoadObject').loading().setValue({pageID:k}));c('MessengerPlatformBotReviewReadDataManager').fetchReviewState(k);}return this.$MessengerPlatformBotReviewStore1.get(k)||c('LoadObject').empty();};f.exports=new j();}),null);