if (self.CavalryLogger) { CavalryLogger.start_js(["IoK8n"]); }

__d('MNCommerceReviewDialog.react',['fbt','cx','CurrentEnvironment','MNCommerceButton.react','MNCommerceDetailsDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React','StarsInput.react','MNCommerceReviewDialogTextArea.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(o,p){k.constructor.call(this,o,p);n.call(this);this.state=this.$MNCommerceReviewDialog1();}m.prototype.componentWillReceiveProps=function(o){this.setState(this.$MNCommerceReviewDialog1(o));};m.prototype.render=function(){var o=this.props.merchantName||'',p=this.state.rating>0,q=this.props.review||'',r=this.state.review||'',s=this.state.rating!==this.props.rating||r.length!==q.length||r!==q,t=h._("Write a review for {label for merchant name}",[h.param('label for merchant name',o)]),u=h._("Cancel"),v=h._("Send"),w=h._("Review options couldn't be shown.");return (c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:w,onToggle:this.props.onToggle,shown:this.props.shown},this.props),c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:true},t),c('React').createElement(c('MNCommerceDialogBody.react'),null,this.$MNCommerceReviewDialog2()),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:u,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:v,onClick:this.$MNCommerceReviewDialog3,disabled:!p||!s,use:'confirm'}))));};m.propTypes={error:l.object,loading:l.bool.isRequired,rating:l.number,review:l.string,merchantName:l.string,onCancelButtonClick:l.func,onConfirmButtonClick:l.func.isRequired,pageId:l.string};var n=function o(){this.onStarsChangeClick=function(p){var q=this.state.review;this.onTypeChange(p,q);}.bind(this);this.onReviewChange=function(p){var q=this.state.rating;this.onTypeChange(q,p.target.value);}.bind(this);this.$MNCommerceReviewDialog1=function(p){var q=p||this.props,r=q.rating,s=q.review;return {rating:r,review:s};}.bind(this);this.onTypeChange=function(p,q){this.setState({rating:p,review:q});}.bind(this);this.$MNCommerceReviewDialog2=function(){var p=c('CurrentEnvironment').messengerdotcom,q=this.state.rating||0,r=this.state.review||'',s=(p?"_159y":'')+(!p?' '+"_159z":''),t=(p?"_15a3":'')+(' '+"_15a4");return (c('React').createElement('div',null,c('React').createElement('div',{className:t},' Rate your experience'),c('React').createElement(c('StarsInput.react'),{allowMultipleSubmissions:true,large:true,onClick:this.onStarsChangeClick,count:q}),c('React').createElement(c('MNCommerceReviewDialogTextArea.react'),{className:s,defaultValue:r,onChange:this.onReviewChange,placeholder:'Write a review...'})));}.bind(this);this.$MNCommerceReviewDialog3=function(p){var q=this.props;q.onToggle(false);if(!q.onConfirmButtonClick)return;var r=q.pageId;q.onConfirmButtonClick(r,this.state.rating,this.state.review);}.bind(this);};f.exports=m;}),null);