if (self.CavalryLogger) { CavalryLogger.start_js(["oJgbU"]); }

__d('EditChatTabNicknamesDialog',['cx','fbt','EditChatTabNicknameDialog','immutable','ImmutableObject','MercuryThreads','MercuryIDs','MessengerAdminGroupUtils','MercuryParticipants','MessengerContactList.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerScrollableArea.react','React','SimpleXUIDialog','XUIDialogCancelButton.react','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('MercuryThreads').get(),k=200,l=350,m={show:function n(o,p,q){var r=null,s=j.getThreadMetaNow(o),t=c('immutable').Map().withMutations(function(z){if(!s)return;s.participants&&s.participants.forEach(function(aa){z.set(aa,c('MercuryParticipants').getOrFetch(aa));});s.is_subscribed&&z.set(c('MercuryIDs').getParticipantIDFromUserID(p),c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p)));}),u=c('MessengerAdminGroupUtils').isJoinableThread(s),v=t.filter(function(z){if(!z)return false;var aa=c('MercuryIDs').getUserIDFromParticipantID(z.id);return u&&aa===p||!u;}).toArray(),w=c('React').createElement('div',{className:"_4h9n"},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Edit nicknames")))),x=c('React').createElement('div',{className:"_4h9n"},c('React').createElement('div',{className:"_4h9o"},c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%'},c('React').createElement(c('MessengerContactList.react'),{contactAdapter:function(z){return (this._fromMercuryParticipant(z,s));}.bind(this),disableRole:true,listSections:c('immutable').OrderedMap([[null,v]]),onSelect:function(z){r&&r.hide();setTimeout(function(){return (this._handleContactSelect(z,s,p));}.bind(this),k);}.bind(this),rowClassName:"_44kr",viewer:p,thread:s})))),y=c('React').createElement('div',null,c('React').createElement(c('XUIDialogCancelButton.react'),null));r=c('SimpleXUIDialog').showEx(x,w,y,null,{NICKNAME_DIALOG_WIDTH:l,causalElement:q});},_handleContactSelect:function n(o,p,q){var r,s,t=c('MercuryIDs').getUserIDFromParticipantID(o.id),u=((r=p)!=null?(s=r.custom_nickname)!=null?s[t]:s:r)||'',v=p.thread_id;c('EditChatTabNicknameDialog').show(v,o,u,q,this.linkRef);},_fromMercuryParticipant:function n(o,p){var q=c('MercuryIDs').getUserIDFromParticipantID(o.id),r=o.name,s='';if(p.custom_nickname&&p.custom_nickname[q]){r=p.custom_nickname[q];s=o.name;}return new (c('ImmutableObject'))({alias:o.alias,uid:o.id,photo:o.image_src,title:r,subtitle:s,type:o.type,isMessengerUser:o.is_messenger_user,href:o.href});}};f.exports=m;}),null);